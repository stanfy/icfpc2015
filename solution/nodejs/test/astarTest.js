/**
 * Created by otaykalo on 8-8-2015.
 */
var assert = require('assert');
var expect = require("chai").expect;
var astar = require("../logic/astar");
var solver = require("../logic/solver");
describe("astar", function () {

    context("neighbours test", function () {


        it("oneStep Left", function () {
            var initialState = {"board":{"filledOpt":{"5000":true,"5004":true,"5030":true,"5034":true,"6001":true,"6004":true,"6030":true,"6034":true,"7001":true,"7003":true,"7030":true,"7034":true,"8002":true,"8003":true,"8029":true,"8030":true,"8031":true,"8032":true,"8034":true,"9002":true,"9005":true,"9009":true,"9012":true,"9013":true,"9014":true,"9018":true,"9019":true,"9020":true,"9024":true,"9025":true,"9026":true,"9030":true,"9034":true,"9035":true,"9036":true,"10002":true,"10006":true,"10009":true,"10012":true,"10015":true,"10018":true,"10021":true,"10024":true,"10027":true,"10030":true,"10034":true,"10037":true,"11002":true,"11005":true,"11009":true,"11011":true,"11015":true,"11017":true,"11021":true,"11023":true,"11027":true,"11030":true,"11034":true,"11037":true,"12002":true,"12006":true,"12009":true,"12012":true,"12015":true,"12018":true,"12021":true,"12024":true,"12027":true,"12030":true,"12034":true,"12037":true,"13002":true,"13006":true,"13007":true,"13008":true,"13012":true,"13013":true,"13014":true,"13015":true,"13018":true,"13019":true,"13020":true,"13021":true,"13024":true,"13025":true,"13026":true,"13030":true,"13031":true,"13034":true,"13037":true,"14015":true,"14021":true,"15014":true,"15020":true,"16012":true,"16013":true,"16014":true,"16018":true,"16019":true,"16020":true},"sourceLength":99,"filled":[{"x":0,"y":5},{"x":4,"y":5},{"x":30,"y":5},{"x":34,"y":5},{"x":1,"y":6},{"x":4,"y":6},{"x":30,"y":6},{"x":34,"y":6},{"x":1,"y":7},{"x":3,"y":7},{"x":30,"y":7},{"x":34,"y":7},{"x":2,"y":8},{"x":3,"y":8},{"x":29,"y":8},{"x":30,"y":8},{"x":31,"y":8},{"x":32,"y":8},{"x":34,"y":8},{"x":2,"y":9},{"x":5,"y":9},{"x":9,"y":9},{"x":12,"y":9},{"x":13,"y":9},{"x":14,"y":9},{"x":18,"y":9},{"x":19,"y":9},{"x":20,"y":9},{"x":24,"y":9},{"x":25,"y":9},{"x":26,"y":9},{"x":30,"y":9},{"x":34,"y":9},{"x":35,"y":9},{"x":36,"y":9},{"x":2,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":12,"y":10},{"x":15,"y":10},{"x":18,"y":10},{"x":21,"y":10},{"x":24,"y":10},{"x":27,"y":10},{"x":30,"y":10},{"x":34,"y":10},{"x":37,"y":10},{"x":2,"y":11},{"x":5,"y":11},{"x":9,"y":11},{"x":11,"y":11},{"x":15,"y":11},{"x":17,"y":11},{"x":21,"y":11},{"x":23,"y":11},{"x":27,"y":11},{"x":30,"y":11},{"x":34,"y":11},{"x":37,"y":11},{"x":2,"y":12},{"x":6,"y":12},{"x":9,"y":12},{"x":12,"y":12},{"x":15,"y":12},{"x":18,"y":12},{"x":21,"y":12},{"x":24,"y":12},{"x":27,"y":12},{"x":30,"y":12},{"x":34,"y":12},{"x":37,"y":12},{"x":2,"y":13},{"x":6,"y":13},{"x":7,"y":13},{"x":8,"y":13},{"x":12,"y":13},{"x":13,"y":13},{"x":14,"y":13},{"x":15,"y":13},{"x":18,"y":13},{"x":19,"y":13},{"x":20,"y":13},{"x":21,"y":13},{"x":24,"y":13},{"x":25,"y":13},{"x":26,"y":13},{"x":30,"y":13},{"x":31,"y":13},{"x":34,"y":13},{"x":37,"y":13},{"x":15,"y":14},{"x":21,"y":14},{"x":14,"y":15},{"x":20,"y":15},{"x":12,"y":16},{"x":13,"y":16},{"x":14,"y":16},{"x":18,"y":16},{"x":19,"y":16},{"x":20,"y":16}],"id":7,"units":[{"members":[{"x":0,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0,18705,22828,16651,27669],"width":40,"height":20},"state":{"state":"ok","unit":{"members":[{"x":18,"y":0},{"x":20,"y":0}],"pivot":{"x":19,"y":0}},"score":0,"seed":12345,"hashes":[{"1179648":true,"1310720":true}],"estimation":"{\"value\":326.92624509992936,\"score\":0,\"holes\":-356.07375490007064,\"lines\":188,\"items\":495}"}};
            var closeState = {"board":{"filledOpt":{"5000":true,"5004":true,"5030":true,"5034":true,"6001":true,"6004":true,"6030":true,"6034":true,"7001":true,"7003":true,"7030":true,"7034":true,"8002":true,"8003":true,"8029":true,"8030":true,"8031":true,"8032":true,"8034":true,"9002":true,"9005":true,"9009":true,"9012":true,"9013":true,"9014":true,"9018":true,"9019":true,"9020":true,"9024":true,"9025":true,"9026":true,"9030":true,"9034":true,"9035":true,"9036":true,"10002":true,"10006":true,"10009":true,"10012":true,"10015":true,"10018":true,"10021":true,"10024":true,"10027":true,"10030":true,"10034":true,"10037":true,"11002":true,"11005":true,"11009":true,"11011":true,"11015":true,"11017":true,"11021":true,"11023":true,"11027":true,"11030":true,"11034":true,"11037":true,"12002":true,"12006":true,"12009":true,"12012":true,"12015":true,"12018":true,"12021":true,"12024":true,"12027":true,"12030":true,"12034":true,"12037":true,"13002":true,"13006":true,"13007":true,"13008":true,"13012":true,"13013":true,"13014":true,"13015":true,"13018":true,"13019":true,"13020":true,"13021":true,"13024":true,"13025":true,"13026":true,"13030":true,"13031":true,"13034":true,"13037":true,"14015":true,"14021":true,"15014":true,"15020":true,"16012":true,"16013":true,"16014":true,"16018":true,"16019":true,"16020":true},"sourceLength":99,"filled":[{"x":0,"y":5},{"x":4,"y":5},{"x":30,"y":5},{"x":34,"y":5},{"x":1,"y":6},{"x":4,"y":6},{"x":30,"y":6},{"x":34,"y":6},{"x":1,"y":7},{"x":3,"y":7},{"x":30,"y":7},{"x":34,"y":7},{"x":2,"y":8},{"x":3,"y":8},{"x":29,"y":8},{"x":30,"y":8},{"x":31,"y":8},{"x":32,"y":8},{"x":34,"y":8},{"x":2,"y":9},{"x":5,"y":9},{"x":9,"y":9},{"x":12,"y":9},{"x":13,"y":9},{"x":14,"y":9},{"x":18,"y":9},{"x":19,"y":9},{"x":20,"y":9},{"x":24,"y":9},{"x":25,"y":9},{"x":26,"y":9},{"x":30,"y":9},{"x":34,"y":9},{"x":35,"y":9},{"x":36,"y":9},{"x":2,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":12,"y":10},{"x":15,"y":10},{"x":18,"y":10},{"x":21,"y":10},{"x":24,"y":10},{"x":27,"y":10},{"x":30,"y":10},{"x":34,"y":10},{"x":37,"y":10},{"x":2,"y":11},{"x":5,"y":11},{"x":9,"y":11},{"x":11,"y":11},{"x":15,"y":11},{"x":17,"y":11},{"x":21,"y":11},{"x":23,"y":11},{"x":27,"y":11},{"x":30,"y":11},{"x":34,"y":11},{"x":37,"y":11},{"x":2,"y":12},{"x":6,"y":12},{"x":9,"y":12},{"x":12,"y":12},{"x":15,"y":12},{"x":18,"y":12},{"x":21,"y":12},{"x":24,"y":12},{"x":27,"y":12},{"x":30,"y":12},{"x":34,"y":12},{"x":37,"y":12},{"x":2,"y":13},{"x":6,"y":13},{"x":7,"y":13},{"x":8,"y":13},{"x":12,"y":13},{"x":13,"y":13},{"x":14,"y":13},{"x":15,"y":13},{"x":18,"y":13},{"x":19,"y":13},{"x":20,"y":13},{"x":21,"y":13},{"x":24,"y":13},{"x":25,"y":13},{"x":26,"y":13},{"x":30,"y":13},{"x":31,"y":13},{"x":34,"y":13},{"x":37,"y":13},{"x":15,"y":14},{"x":21,"y":14},{"x":14,"y":15},{"x":20,"y":15},{"x":12,"y":16},{"x":13,"y":16},{"x":14,"y":16},{"x":18,"y":16},{"x":19,"y":16},{"x":20,"y":16}],"id":7,"units":[{"members":[{"x":0,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0,18705,22828,16651,27669],"width":40,"height":20},"state":{"state":"ok","unit":{"pivot":{"x":17,"y":2},"members":[{"x":16,"y":2},{"x":18,"y":2}]},"score":0,"seed":12345,"hashes":[{"1048578":true,"1179650":true}],"estimation":"{\"value\":326.92624509992936,\"score\":0,\"holes\":-356.07375490007064,\"lines\":188,\"items\":495}"}};

            var a1 = {"board":{"filledOpt":{"5003":true,"5011":true,"6002":true,"6007":true,"6008":true,"7012":true,"8003":true,"8008":true,"8012":true,"8013":true,"9000":true,"9001":true,"9004":true,"9005":true,"10004":true,"10009":true,"10010":true,"10014":true,"11003":true,"11009":true,"11013":true,"12002":true,"12010":true,"13007":true,"14005":true,"14008":true,"15010":true,"16002":true,"16004":true,"17006":true,"18000":true,"18001":true,"18004":true,"18010":true,"18013":true,"19000":true,"19005":true},"sourceLength":99,"filled":[{"x":0,"y":9},{"x":0,"y":18},{"x":0,"y":19},{"x":1,"y":9},{"x":1,"y":18},{"x":2,"y":6},{"x":2,"y":12},{"x":2,"y":16},{"x":3,"y":5},{"x":3,"y":8},{"x":3,"y":11},{"x":4,"y":9},{"x":4,"y":10},{"x":4,"y":16},{"x":4,"y":18},{"x":5,"y":9},{"x":5,"y":14},{"x":5,"y":19},{"x":6,"y":17},{"x":7,"y":6},{"x":7,"y":13},{"x":8,"y":6},{"x":8,"y":8},{"x":8,"y":14},{"x":9,"y":10},{"x":9,"y":11},{"x":10,"y":10},{"x":10,"y":12},{"x":10,"y":15},{"x":10,"y":18},{"x":11,"y":5},{"x":12,"y":7},{"x":12,"y":8},{"x":13,"y":8},{"x":13,"y":11},{"x":13,"y":18},{"x":14,"y":10}],"id":16,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0}],"pivot":{"x":0,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":1,"y":1}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0],"width":15,"height":20},"state":{"state":"ok","unit":{"members":[{"x":7,"y":0}],"pivot":{"x":7,"y":0}},"score":0,"seed":12345,"hashes":[{"458752":true}],"estimation":"{\"value\":397.61349206349206,\"score\":0,\"holes\":-147.18650793650795,\"lines\":49.8,\"items\":495}"}};
            var a2 = {"board":{"filledOpt":{"5003":true,"5011":true,"6002":true,"6007":true,"6008":true,"7012":true,"8003":true,"8008":true,"8012":true,"8013":true,"9000":true,"9001":true,"9004":true,"9005":true,"10004":true,"10009":true,"10010":true,"10014":true,"11003":true,"11009":true,"11013":true,"12002":true,"12010":true,"13007":true,"14005":true,"14008":true,"15010":true,"16002":true,"16004":true,"17006":true,"18000":true,"18001":true,"18004":true,"18010":true,"18013":true,"19000":true,"19005":true},"sourceLength":99,"filled":[{"x":0,"y":9},{"x":0,"y":18},{"x":0,"y":19},{"x":1,"y":9},{"x":1,"y":18},{"x":2,"y":6},{"x":2,"y":12},{"x":2,"y":16},{"x":3,"y":5},{"x":3,"y":8},{"x":3,"y":11},{"x":4,"y":9},{"x":4,"y":10},{"x":4,"y":16},{"x":4,"y":18},{"x":5,"y":9},{"x":5,"y":14},{"x":5,"y":19},{"x":6,"y":17},{"x":7,"y":6},{"x":7,"y":13},{"x":8,"y":6},{"x":8,"y":8},{"x":8,"y":14},{"x":9,"y":10},{"x":9,"y":11},{"x":10,"y":10},{"x":10,"y":12},{"x":10,"y":15},{"x":10,"y":18},{"x":11,"y":5},{"x":12,"y":7},{"x":12,"y":8},{"x":13,"y":8},{"x":13,"y":11},{"x":13,"y":18},{"x":14,"y":10}],"id":16,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0}],"pivot":{"x":0,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":1,"y":1}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0],"width":15,"height":20},"state":{"state":"ok","unit":{"pivot":{"x":14,"y":19},"members":[{"x":14,"y":19}]},"score":0,"seed":12345,"hashes":[{"917523":true}],"estimation":"{\"value\":397.61349206349206,\"score\":0,\"holes\":-147.18650793650795,\"lines\":49.8,\"items\":495}"}};

            var map1_seed0_start = {"board":{"filledOpt":{"4002":true,"4003":true,"4004":true,"4005":true,"4006":true,"4011":true,"5002":true,"5008":true,"5011":true,"6002":true,"6011":true,"7002":true,"7003":true,"7004":true,"7008":true,"7011":true,"8002":true,"8009":true,"8011":true,"9002":true,"9008":true,"10002":true,"10003":true,"10004":true,"10005":true,"10006":true,"10009":true,"10011":true},"sourceLength":99,"filled":[{"x":2,"y":4},{"x":3,"y":4},{"x":4,"y":4},{"x":5,"y":4},{"x":6,"y":4},{"x":11,"y":4},{"x":2,"y":5},{"x":8,"y":5},{"x":11,"y":5},{"x":2,"y":6},{"x":11,"y":6},{"x":2,"y":7},{"x":3,"y":7},{"x":4,"y":7},{"x":8,"y":7},{"x":11,"y":7},{"x":2,"y":8},{"x":9,"y":8},{"x":11,"y":8},{"x":2,"y":9},{"x":8,"y":9},{"x":2,"y":10},{"x":3,"y":10},{"x":4,"y":10},{"x":5,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":11,"y":10}],"id":1,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}}],"sourceSeeds":[0],"width":15,"height":15},"state":{"state":"ok","unit":{"members":[{"x":7,"y":0}],"pivot":{"x":7,"y":0}},"score":0,"seed":12345,"hashes":[{"458752":true}],"estimation":"{\"value\":459.25,\"score\":0,\"holes\":-109.75000000000001,\"lines\":74,\"items\":495}"}};

            var map1_seed0_bootom = {"board":{"filledOpt":{"4002":true,"4003":true,"4004":true,"4005":true,"4006":true,"4011":true,"5002":true,"5008":true,"5011":true,"6002":true,"6011":true,"7002":true,"7003":true,"7004":true,"7008":true,"7011":true,"8002":true,"8009":true,"8011":true,"9002":true,"9008":true,"10002":true,"10003":true,"10004":true,"10005":true,"10006":true,"10009":true,"10011":true},"sourceLength":99,"filled":[{"x":2,"y":4},{"x":3,"y":4},{"x":4,"y":4},{"x":5,"y":4},{"x":6,"y":4},{"x":11,"y":4},{"x":2,"y":5},{"x":8,"y":5},{"x":11,"y":5},{"x":2,"y":6},{"x":11,"y":6},{"x":2,"y":7},{"x":3,"y":7},{"x":4,"y":7},{"x":8,"y":7},{"x":11,"y":7},{"x":2,"y":8},{"x":9,"y":8},{"x":11,"y":8},{"x":2,"y":9},{"x":8,"y":9},{"x":2,"y":10},{"x":3,"y":10},{"x":4,"y":10},{"x":5,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":11,"y":10}],"id":1,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}}],"sourceSeeds":[0],"width":15,"height":15},"state":{"state":"ok","unit":{"members":[{"x":8,"y":12}],"pivot":{"x":8,"y":12}},"score":0,"seed":12345,"hashes":[{"131084":true},{"196620":true},{"262156":true},{"327692":true},{"393228":true},{"458764":true},{"524300":true}],"estimation":"{\"value\":459.25,\"score\":0,\"holes\":-109.75000000000001,\"lines\":74,\"items\":495}"}};
            //bpbppbbpaapabbppp
            // W W W W SW SW SW SW W SW SW SE SE SE SE SW SE SW W W SE E E E SE SE E E E E E E E E SE SE
            // W SW SW

            a1 = map1_seed0_start;
            a2 = map1_seed0_bootom;

            var g = new astar.Graph(a1);
            var res = astar.astar.search(g, a1, a2);
            var coms = [];
            res.forEach(function(x){coms.push(x.step)});
            console.log(coms.join(","));
            var letters = solver.lfc(coms.join(","));
            console.log(letters);
        });


    });
});