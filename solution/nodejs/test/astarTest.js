/**
 * Created by otaykalo on 8-8-2015.
 */
var assert = require('assert');
var expect = require("chai").expect;
var astar = require("../logic/astar");
var solver = require("../logic/solver");
describe("astar", function () {

    context("neighbours test", function () {


        it("oneStep Left", function () {

            var map1_seed0_start = {"board":{"filledOpt":{"4002":true,"4003":true,"4004":true,"4005":true,"4006":true,"4011":true,"5002":true,"5008":true,"5011":true,"6002":true,"6011":true,"7002":true,"7003":true,"7004":true,"7008":true,"7011":true,"8002":true,"8009":true,"8011":true,"9002":true,"9008":true,"10002":true,"10003":true,"10004":true,"10005":true,"10006":true,"10009":true,"10011":true},"sourceLength":99,"filled":[{"x":2,"y":4},{"x":3,"y":4},{"x":4,"y":4},{"x":5,"y":4},{"x":6,"y":4},{"x":11,"y":4},{"x":2,"y":5},{"x":8,"y":5},{"x":11,"y":5},{"x":2,"y":6},{"x":11,"y":6},{"x":2,"y":7},{"x":3,"y":7},{"x":4,"y":7},{"x":8,"y":7},{"x":11,"y":7},{"x":2,"y":8},{"x":9,"y":8},{"x":11,"y":8},{"x":2,"y":9},{"x":8,"y":9},{"x":2,"y":10},{"x":3,"y":10},{"x":4,"y":10},{"x":5,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":11,"y":10}],"id":1,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}}],"sourceSeeds":[0],"width":15,"height":15},"state":{"state":"ok","unit":{"pivot":{"x":7,"y":0},"members":[{"x":7,"y":0}]},"score":0,"seed":12345,"hashes":[]}};
            var map1_seed0_leftStep = {"board":{"filledOpt":{"4002":true,"4003":true,"4004":true,"4005":true,"4006":true,"4011":true,"5002":true,"5008":true,"5011":true,"6002":true,"6011":true,"7002":true,"7003":true,"7004":true,"7008":true,"7011":true,"8002":true,"8009":true,"8011":true,"9002":true,"9008":true,"10002":true,"10003":true,"10004":true,"10005":true,"10006":true,"10009":true,"10011":true},"sourceLength":99,"filled":[{"x":2,"y":4},{"x":3,"y":4},{"x":4,"y":4},{"x":5,"y":4},{"x":6,"y":4},{"x":11,"y":4},{"x":2,"y":5},{"x":8,"y":5},{"x":11,"y":5},{"x":2,"y":6},{"x":11,"y":6},{"x":2,"y":7},{"x":3,"y":7},{"x":4,"y":7},{"x":8,"y":7},{"x":11,"y":7},{"x":2,"y":8},{"x":9,"y":8},{"x":11,"y":8},{"x":2,"y":9},{"x":8,"y":9},{"x":2,"y":10},{"x":3,"y":10},{"x":4,"y":10},{"x":5,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":11,"y":10}],"id":1,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}}],"sourceSeeds":[0],"width":15,"height":15},"state":{"state":"ok","unit":{"pivot":{"x":6,"y":0},"members":[{"x":6,"y":0}]},"score":0,"seed":12345,"hashes":[{"458752":true},{"393216":true}],"estimation":"{\"value\":459.25,\"score\":0,\"holes\":-109.75000000000001,\"lines\":74,\"items\":495}"}};

            a1 = map1_seed0_start;
            a2 = map1_seed0_leftStep;

            var g = new astar.Graph(a1);
            var res = astar.astar.search(g, a1, a2);
            var coms = [];
            res.forEach(function(x){coms.push(x.step)});
            var comsText = coms.join(",");
            console.log(comsText);
            expect(comsText).to.equal("W");
            var letters = solver.lfc(comsText);

            console.log(letters);
            expect(letters).to.equal("p");
        });


        it("oneStep right", function () {

            var map1_seed0_start = {"board":{"filledOpt":{"4002":true,"4003":true,"4004":true,"4005":true,"4006":true,"4011":true,"5002":true,"5008":true,"5011":true,"6002":true,"6011":true,"7002":true,"7003":true,"7004":true,"7008":true,"7011":true,"8002":true,"8009":true,"8011":true,"9002":true,"9008":true,"10002":true,"10003":true,"10004":true,"10005":true,"10006":true,"10009":true,"10011":true},"sourceLength":99,"filled":[{"x":2,"y":4},{"x":3,"y":4},{"x":4,"y":4},{"x":5,"y":4},{"x":6,"y":4},{"x":11,"y":4},{"x":2,"y":5},{"x":8,"y":5},{"x":11,"y":5},{"x":2,"y":6},{"x":11,"y":6},{"x":2,"y":7},{"x":3,"y":7},{"x":4,"y":7},{"x":8,"y":7},{"x":11,"y":7},{"x":2,"y":8},{"x":9,"y":8},{"x":11,"y":8},{"x":2,"y":9},{"x":8,"y":9},{"x":2,"y":10},{"x":3,"y":10},{"x":4,"y":10},{"x":5,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":11,"y":10}],"id":1,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}}],"sourceSeeds":[0],"width":15,"height":15},"state":{"state":"ok","unit":{"pivot":{"x":7,"y":0},"members":[{"x":7,"y":0}]},"score":0,"seed":12345,"hashes":[]}};
            var map1_seed0_rightStep = {"board":{"filledOpt":{"4002":true,"4003":true,"4004":true,"4005":true,"4006":true,"4011":true,"5002":true,"5008":true,"5011":true,"6002":true,"6011":true,"7002":true,"7003":true,"7004":true,"7008":true,"7011":true,"8002":true,"8009":true,"8011":true,"9002":true,"9008":true,"10002":true,"10003":true,"10004":true,"10005":true,"10006":true,"10009":true,"10011":true},"sourceLength":99,"filled":[{"x":2,"y":4},{"x":3,"y":4},{"x":4,"y":4},{"x":5,"y":4},{"x":6,"y":4},{"x":11,"y":4},{"x":2,"y":5},{"x":8,"y":5},{"x":11,"y":5},{"x":2,"y":6},{"x":11,"y":6},{"x":2,"y":7},{"x":3,"y":7},{"x":4,"y":7},{"x":8,"y":7},{"x":11,"y":7},{"x":2,"y":8},{"x":9,"y":8},{"x":11,"y":8},{"x":2,"y":9},{"x":8,"y":9},{"x":2,"y":10},{"x":3,"y":10},{"x":4,"y":10},{"x":5,"y":10},{"x":6,"y":10},{"x":9,"y":10},{"x":11,"y":10}],"id":1,"units":[{"members":[{"x":0,"y":0}],"pivot":{"x":0,"y":0}}],"sourceSeeds":[0],"width":15,"height":15},"state":{"state":"ok","unit":{"pivot":{"x":8,"y":0},"members":[{"x":8,"y":0}]},"score":0,"seed":12345,"hashes":[{"458752":true},{"524288":true}],"estimation":"{\"value\":459.25,\"score\":0,\"holes\":-109.75000000000001,\"lines\":74,\"items\":495}"}};
            a1 = map1_seed0_start;
            a2 = map1_seed0_rightStep;

            var g = new astar.Graph(a1);
            var res = astar.astar.search(g, a1, a2);
            var coms = [];
            res.forEach(function(x){coms.push(x.step)});
            var comsText = coms.join(",");
            console.log(comsText);
            expect(comsText).to.equal("E");
            var letters = solver.lfc(comsText);

            console.log(letters);
            expect(letters).to.equal("b");
        });

        it("oneStep down left", function () {

            var map5_seed0_start = {"board":{"filledOpt":{"6002":true,"6003":true,"6004":true,"6005":true,"6008":true,"6010":true,"6022":true,"7002":true,"7005":true,"7007":true,"7010":true,"7021":true,"8002":true,"8006":true,"8008":true,"8010":true,"8022":true,"9002":true,"9003":true,"9004":true,"9005":true,"9010":true,"9012":true,"9015":true,"9017":true,"9018":true,"9019":true,"9021":true,"10002":true,"10005":true,"10010":true,"10012":true,"10015":true,"10017":true,"10020":true,"10022":true,"10023":true,"10024":true,"11002":true,"11005":true,"11010":true,"11012":true,"11014":true,"11016":true,"11017":true,"11018":true,"11019":true,"11021":true,"11024":true,"12002":true,"12006":true,"12010":true,"12013":true,"12014":true,"12017":true,"12022":true,"12025":true,"13002":true,"13006":true,"13010":true,"13013":true,"13017":true,"13018":true,"13019":true,"13021":true,"13024":true,"14013":true,"15012":true},"sourceLength":99,"filled":[{"x":2,"y":6},{"x":3,"y":6},{"x":4,"y":6},{"x":5,"y":6},{"x":8,"y":6},{"x":10,"y":6},{"x":22,"y":6},{"x":2,"y":7},{"x":5,"y":7},{"x":7,"y":7},{"x":10,"y":7},{"x":21,"y":7},{"x":2,"y":8},{"x":6,"y":8},{"x":8,"y":8},{"x":10,"y":8},{"x":22,"y":8},{"x":2,"y":9},{"x":3,"y":9},{"x":4,"y":9},{"x":5,"y":9},{"x":10,"y":9},{"x":12,"y":9},{"x":15,"y":9},{"x":17,"y":9},{"x":18,"y":9},{"x":19,"y":9},{"x":21,"y":9},{"x":2,"y":10},{"x":5,"y":10},{"x":10,"y":10},{"x":12,"y":10},{"x":15,"y":10},{"x":17,"y":10},{"x":20,"y":10},{"x":22,"y":10},{"x":23,"y":10},{"x":24,"y":10},{"x":2,"y":11},{"x":5,"y":11},{"x":10,"y":11},{"x":12,"y":11},{"x":14,"y":11},{"x":16,"y":11},{"x":17,"y":11},{"x":18,"y":11},{"x":19,"y":11},{"x":21,"y":11},{"x":24,"y":11},{"x":2,"y":12},{"x":6,"y":12},{"x":10,"y":12},{"x":13,"y":12},{"x":14,"y":12},{"x":17,"y":12},{"x":22,"y":12},{"x":25,"y":12},{"x":2,"y":13},{"x":6,"y":13},{"x":10,"y":13},{"x":13,"y":13},{"x":17,"y":13},{"x":18,"y":13},{"x":19,"y":13},{"x":21,"y":13},{"x":24,"y":13},{"x":13,"y":14},{"x":12,"y":15}],"id":5,"units":[{"members":[{"x":0,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0,22837,22837,15215,24851,11460,14027,32620,32719,15577],"width":30,"height":20},"state":{"state":"ok","unit":{"pivot":{"x":14,"y":0},"members":[{"x":13,"y":0},{"x":15,"y":0}]},"score":0,"seed":12345,"hashes":[]}};

            var map5_seed0_dest = {"board":{"filledOpt":{"6002":true,"6003":true,"6004":true,"6005":true,"6008":true,"6010":true,"6022":true,"7002":true,"7005":true,"7007":true,"7010":true,"7021":true,"8002":true,"8006":true,"8008":true,"8010":true,"8022":true,"9002":true,"9003":true,"9004":true,"9005":true,"9010":true,"9012":true,"9015":true,"9017":true,"9018":true,"9019":true,"9021":true,"10002":true,"10005":true,"10010":true,"10012":true,"10015":true,"10017":true,"10020":true,"10022":true,"10023":true,"10024":true,"11002":true,"11005":true,"11010":true,"11012":true,"11014":true,"11016":true,"11017":true,"11018":true,"11019":true,"11021":true,"11024":true,"12002":true,"12006":true,"12010":true,"12013":true,"12014":true,"12017":true,"12022":true,"12025":true,"13002":true,"13006":true,"13010":true,"13013":true,"13017":true,"13018":true,"13019":true,"13021":true,"13024":true,"14013":true,"15012":true},"sourceLength":99,"filled":[{"x":2,"y":6},{"x":3,"y":6},{"x":4,"y":6},{"x":5,"y":6},{"x":8,"y":6},{"x":10,"y":6},{"x":22,"y":6},{"x":2,"y":7},{"x":5,"y":7},{"x":7,"y":7},{"x":10,"y":7},{"x":21,"y":7},{"x":2,"y":8},{"x":6,"y":8},{"x":8,"y":8},{"x":10,"y":8},{"x":22,"y":8},{"x":2,"y":9},{"x":3,"y":9},{"x":4,"y":9},{"x":5,"y":9},{"x":10,"y":9},{"x":12,"y":9},{"x":15,"y":9},{"x":17,"y":9},{"x":18,"y":9},{"x":19,"y":9},{"x":21,"y":9},{"x":2,"y":10},{"x":5,"y":10},{"x":10,"y":10},{"x":12,"y":10},{"x":15,"y":10},{"x":17,"y":10},{"x":20,"y":10},{"x":22,"y":10},{"x":23,"y":10},{"x":24,"y":10},{"x":2,"y":11},{"x":5,"y":11},{"x":10,"y":11},{"x":12,"y":11},{"x":14,"y":11},{"x":16,"y":11},{"x":17,"y":11},{"x":18,"y":11},{"x":19,"y":11},{"x":21,"y":11},{"x":24,"y":11},{"x":2,"y":12},{"x":6,"y":12},{"x":10,"y":12},{"x":13,"y":12},{"x":14,"y":12},{"x":17,"y":12},{"x":22,"y":12},{"x":25,"y":12},{"x":2,"y":13},{"x":6,"y":13},{"x":10,"y":13},{"x":13,"y":13},{"x":17,"y":13},{"x":18,"y":13},{"x":19,"y":13},{"x":21,"y":13},{"x":24,"y":13},{"x":13,"y":14},{"x":12,"y":15}],"id":5,"units":[{"members":[{"x":0,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0,22837,22837,15215,24851,11460,14027,32620,32719,15577],"width":30,"height":20},"state":{"state":"ok","unit":{"pivot":{"x":13,"y":1},"members":[{"x":12,"y":1},{"x":14,"y":1}]},"score":0,"seed":12345,"hashes":[{"786433":true,"917505":true}],"estimation":"{\"value\":306.1755425946604,\"score\":0,\"holes\":-312.8244574053396,\"lines\":124,\"items\":495}"}};
            a1 = map5_seed0_start;
            a2 = map5_seed0_dest;

            var g = new astar.Graph(a1);
            var res = astar.astar.search(g, a1, a2);
            var coms = [];
            res.forEach(function(x){coms.push(x.step)});
            var comsText = coms.join(",");
            console.log(comsText);

            var letters = solver.lfc(comsText);

            console.log(letters);
            expect(letters).to.equal("a");
            expect(comsText).to.equal("SW");
        });

        it("oneStep down right", function () {

            var map5_seed0_start = {"board":{"filledOpt":{"6002":true,"6003":true,"6004":true,"6005":true,"6008":true,"6010":true,"6022":true,"7002":true,"7005":true,"7007":true,"7010":true,"7021":true,"8002":true,"8006":true,"8008":true,"8010":true,"8022":true,"9002":true,"9003":true,"9004":true,"9005":true,"9010":true,"9012":true,"9015":true,"9017":true,"9018":true,"9019":true,"9021":true,"10002":true,"10005":true,"10010":true,"10012":true,"10015":true,"10017":true,"10020":true,"10022":true,"10023":true,"10024":true,"11002":true,"11005":true,"11010":true,"11012":true,"11014":true,"11016":true,"11017":true,"11018":true,"11019":true,"11021":true,"11024":true,"12002":true,"12006":true,"12010":true,"12013":true,"12014":true,"12017":true,"12022":true,"12025":true,"13002":true,"13006":true,"13010":true,"13013":true,"13017":true,"13018":true,"13019":true,"13021":true,"13024":true,"14013":true,"15012":true},"sourceLength":99,"filled":[{"x":2,"y":6},{"x":3,"y":6},{"x":4,"y":6},{"x":5,"y":6},{"x":8,"y":6},{"x":10,"y":6},{"x":22,"y":6},{"x":2,"y":7},{"x":5,"y":7},{"x":7,"y":7},{"x":10,"y":7},{"x":21,"y":7},{"x":2,"y":8},{"x":6,"y":8},{"x":8,"y":8},{"x":10,"y":8},{"x":22,"y":8},{"x":2,"y":9},{"x":3,"y":9},{"x":4,"y":9},{"x":5,"y":9},{"x":10,"y":9},{"x":12,"y":9},{"x":15,"y":9},{"x":17,"y":9},{"x":18,"y":9},{"x":19,"y":9},{"x":21,"y":9},{"x":2,"y":10},{"x":5,"y":10},{"x":10,"y":10},{"x":12,"y":10},{"x":15,"y":10},{"x":17,"y":10},{"x":20,"y":10},{"x":22,"y":10},{"x":23,"y":10},{"x":24,"y":10},{"x":2,"y":11},{"x":5,"y":11},{"x":10,"y":11},{"x":12,"y":11},{"x":14,"y":11},{"x":16,"y":11},{"x":17,"y":11},{"x":18,"y":11},{"x":19,"y":11},{"x":21,"y":11},{"x":24,"y":11},{"x":2,"y":12},{"x":6,"y":12},{"x":10,"y":12},{"x":13,"y":12},{"x":14,"y":12},{"x":17,"y":12},{"x":22,"y":12},{"x":25,"y":12},{"x":2,"y":13},{"x":6,"y":13},{"x":10,"y":13},{"x":13,"y":13},{"x":17,"y":13},{"x":18,"y":13},{"x":19,"y":13},{"x":21,"y":13},{"x":24,"y":13},{"x":13,"y":14},{"x":12,"y":15}],"id":5,"units":[{"members":[{"x":0,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0,22837,22837,15215,24851,11460,14027,32620,32719,15577],"width":30,"height":20},"state":{"state":"ok","unit":{"pivot":{"x":14,"y":0},"members":[{"x":13,"y":0},{"x":15,"y":0}]},"score":0,"seed":12345,"hashes":[]}};

            var map5_seed0_dest = {"board":{"filledOpt":{"6002":true,"6003":true,"6004":true,"6005":true,"6008":true,"6010":true,"6022":true,"7002":true,"7005":true,"7007":true,"7010":true,"7021":true,"8002":true,"8006":true,"8008":true,"8010":true,"8022":true,"9002":true,"9003":true,"9004":true,"9005":true,"9010":true,"9012":true,"9015":true,"9017":true,"9018":true,"9019":true,"9021":true,"10002":true,"10005":true,"10010":true,"10012":true,"10015":true,"10017":true,"10020":true,"10022":true,"10023":true,"10024":true,"11002":true,"11005":true,"11010":true,"11012":true,"11014":true,"11016":true,"11017":true,"11018":true,"11019":true,"11021":true,"11024":true,"12002":true,"12006":true,"12010":true,"12013":true,"12014":true,"12017":true,"12022":true,"12025":true,"13002":true,"13006":true,"13010":true,"13013":true,"13017":true,"13018":true,"13019":true,"13021":true,"13024":true,"14013":true,"15012":true},"sourceLength":99,"filled":[{"x":2,"y":6},{"x":3,"y":6},{"x":4,"y":6},{"x":5,"y":6},{"x":8,"y":6},{"x":10,"y":6},{"x":22,"y":6},{"x":2,"y":7},{"x":5,"y":7},{"x":7,"y":7},{"x":10,"y":7},{"x":21,"y":7},{"x":2,"y":8},{"x":6,"y":8},{"x":8,"y":8},{"x":10,"y":8},{"x":22,"y":8},{"x":2,"y":9},{"x":3,"y":9},{"x":4,"y":9},{"x":5,"y":9},{"x":10,"y":9},{"x":12,"y":9},{"x":15,"y":9},{"x":17,"y":9},{"x":18,"y":9},{"x":19,"y":9},{"x":21,"y":9},{"x":2,"y":10},{"x":5,"y":10},{"x":10,"y":10},{"x":12,"y":10},{"x":15,"y":10},{"x":17,"y":10},{"x":20,"y":10},{"x":22,"y":10},{"x":23,"y":10},{"x":24,"y":10},{"x":2,"y":11},{"x":5,"y":11},{"x":10,"y":11},{"x":12,"y":11},{"x":14,"y":11},{"x":16,"y":11},{"x":17,"y":11},{"x":18,"y":11},{"x":19,"y":11},{"x":21,"y":11},{"x":24,"y":11},{"x":2,"y":12},{"x":6,"y":12},{"x":10,"y":12},{"x":13,"y":12},{"x":14,"y":12},{"x":17,"y":12},{"x":22,"y":12},{"x":25,"y":12},{"x":2,"y":13},{"x":6,"y":13},{"x":10,"y":13},{"x":13,"y":13},{"x":17,"y":13},{"x":18,"y":13},{"x":19,"y":13},{"x":21,"y":13},{"x":24,"y":13},{"x":13,"y":14},{"x":12,"y":15}],"id":5,"units":[{"members":[{"x":0,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":0,"y":0}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":0},{"x":1,"y":0},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":0,"y":3}],"pivot":{"x":0,"y":1}},{"members":[{"x":2,"y":0},{"x":1,"y":1},{"x":0,"y":1},{"x":0,"y":2}],"pivot":{"x":1,"y":1}},{"members":[{"x":2,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":1,"y":1},{"x":2,"y":0},{"x":1,"y":0},{"x":0,"y":1}],"pivot":{"x":1,"y":0}},{"members":[{"x":0,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":0,"y":2}],"pivot":{"x":0,"y":1}},{"members":[{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":0},{"x":2,"y":0}],"pivot":{"x":1,"y":0}}],"sourceSeeds":[0,22837,22837,15215,24851,11460,14027,32620,32719,15577],"width":30,"height":20},"state":{"state":"ok","unit":{"pivot":{"x":14,"y":1},"members":[{"x":13,"y":1},{"x":15,"y":1}]},"score":0,"seed":12345,"hashes":[{"851969":true,"983041":true}],"estimation":"{\"value\":306.1755425946604,\"score\":0,\"holes\":-312.8244574053396,\"lines\":124,\"items\":495}"}};
            a1 = map5_seed0_start;
            a2 = map5_seed0_dest;

            var g = new astar.Graph(a1);
            var res = astar.astar.search(g, a1, a2);
            var coms = [];
            res.forEach(function(x){coms.push(x.step)});
            var comsText = coms.join(",");
            console.log(comsText);

            var letters = solver.lfc(comsText);

            console.log(letters);
            expect(letters).to.equal("l");
            expect(comsText).to.equal("SE");
        });




    });
});